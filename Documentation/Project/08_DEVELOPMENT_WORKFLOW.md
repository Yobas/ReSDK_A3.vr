# Процессы разработки

Руководство по базовым процессам разработки проекта.

## Git workflow

### Структура веток

Проект использует упрощенную структуру веток:

- **`main`** - основная рабочая ветка, содержит стабильный код и принимает изменения через Pull Request'ы
- **`develop`** - присутствует в репозитории, но не используется активно

Ветки создаются только при необходимости для Pull Request'ов (при работе через форки).

### Рабочий процесс

**Основная работа ведется напрямую в `main`:**

```bash
# Начать работу
git checkout main
git pull origin main

# Внести изменения
# ...

# Закоммитить
git add .
git commit -m "Краткое описание изменений"

# Отправить
git push origin main
```

**При работе через Pull Request (из форка):**

1. Создайте форк репозитория на GitHub
2. Клонируйте форк локально
3. Создайте ветку для изменений (опционально, можно работать прямо в main форка)
4. Внесите изменения и закоммитьте
5. Отправьте изменения в ваш форк: `git push origin main`
6. Создайте Pull Request в основной репозиторий в ветку `main`

### Формат коммитов

Используйте понятные сообщения коммитов:

- `"Добавлен модуль Inventory"`
- `"Исправлена ошибка загрузки модулей"`
- `"Обновлена документация"`

Опционально можно использовать префиксы для категоризации: `Add:`, `Fix:`, `Update:`, `Docs:`, `Refactor:`

### Разделение коммитов

Разделяйте изменения на логические коммиты - это облегчает понимание истории изменений и откат при необходимости:

```bash
# Хорошо - отдельные коммиты
git add module1.sqf
git commit -m "Add: новый модуль"

git add module2.sqf
git commit -m "Add: еще один модуль"

# Плохо - все в одном коммите
git add .
git commit -m "Изменения"
```

## Работа с багами

1. Обсудите баг с командой (или создайте issue на GitHub)
2. Исправьте баг в `main` (или создайте PR из форка)
3. Закоммитьте с понятным описанием исправления
4. Протестируйте исправление перед отправкой

## Релизный процесс

1. Убедитесь, что все изменения готовы в `main`
2. Обновите версию в `Src/VERSION` согласно семантическому версионированию (см. [Версионирование](07_VERSIONING.md))
3. Закоммитьте обновление версии
4. Создайте тег релиза:
   ```bash
   git tag -a v1.9.2 -m "Release v1.9.2"
   git push origin v1.9.2
   ```
5. Соберите релизную версию: `rb build -release`
6. Создайте релиз на GitHub (если необходимо) с описанием изменений

**Примечание:** Changelog генерируется автоматически через GitHub Actions на основе Pull Request'ов (см. [Версионирование](07_VERSIONING.md)).

## Разрешение конфликтов

### При работе с Pull Request

Если при создании PR возникают конфликты:

1. Обновите вашу ветку из main:
   ```bash
   git checkout main
   git pull origin main
   git checkout ваша-ветка
   git merge main
   ```
2. Разрешите конфликты в файлах
3. Закоммитьте разрешение: `git commit -m "Resolve merge conflicts"`
4. Отправьте изменения: `git push origin ваша-ветка`

GitHub также позволяет разрешать конфликты через веб-интерфейс.

### При прямой работе в main

Если при `git pull` возникают конфликты:

```bash
# Разрешите конфликты в файлах
# ...

# Добавьте разрешенные файлы
git add .

# Создайте merge commit
git commit -m "Merge remote-tracking branch 'origin/main'"
```

## Лучшие практики

### Регулярные обновления

Регулярно синхронизируйтесь с удаленным репозиторием:

```bash
git checkout main
git pull origin main
```

### Мелкие коммиты

Делайте небольшие, логические коммиты вместо больших:

```bash
# Хорошо
git commit -m "Add: функция A"
git commit -m "Add: функция B"

# Плохо
git commit -m "Все изменения"
```

### Тестирование

Перед коммитом убедитесь, что:
- Код компилируется без ошибок
- Изменения не ломают существующую функциональность
- Проведено базовое тестирование (если применимо)

### Документация

При изменении API или добавлении новых функций обновляйте соответствующую документацию.

## Что дальше?

- ➡️ [Стандарты кодирования](09_CODING_STANDARDS.md) - правила написания кода
- ➡️ [Версионирование](07_VERSIONING.md) - процесс создания релизов
